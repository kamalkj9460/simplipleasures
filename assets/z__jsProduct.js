"use strict";Shopify.theme.jsProduct={init:function(e){Shopify.theme.jsProduct=$.extend(this,Shopify.theme.getSectionData(e)),navigator.userAgent.match(/Trident.*rv\:11\./)||window.Shopify.loadFeatures([{name:"model-viewer",version:"0.8"},{name:"shopify-xr",version:"1.0"},{name:"model-viewer-ui",version:"1.0"}],Shopify.theme.productMedia.setupMedia);var t=e.find(".product-gallery__main"),i=e.find(".product__info-main"),a=e.find(".sticky-product-scroll");t&&(Shopify.theme.jsProduct.enableSlideshow(t),Shopify.theme.jsProduct.enable_zoom&&document.addEventListener("lazyloaded",Shopify.theme.jsProduct.enableZoom),Shopify.theme.jsProduct.enable_product_lightbox&&Shopify.theme.jsProduct.enableLightbox(t)),i&&i.data("sticky-on-mobile")&&$(window).on("resize",function(){var e=getComputedStyle(i[0],":before").content,t=i.outerHeight();-1!=e.indexOf("is-sticky")?$("body").css("padding-bottom",t+"px"):$("body").css("padding-bottom",0)}).resize(),a&&isScreenSizeLarge()&&"image-scroll"==Shopify.theme.jsProduct.template&&Shopify.theme.jsProduct.enableStickyScroll(a,t),$(".product_form_options",e).each(function(){$(".select-container").length&&new Shopify.OptionSelectors($(this).data("select-id"),{product:$(this).data("product"),onVariantSelected:selectCallback,enableHistoryState:$(this).data("enable-state")})}),"?contact_posted=true"===window.location.search&&($(".notify_form .contact-form").hide(),$(".notify_form .contact-form").prev(".message").html(Shopify.translation.notify_form_success)),"swatches"===Shopify.theme_settings.product_form_style?this.enableProductSwatches():"dropdown"===Shopify.theme_settings.product_form_style&&($(".selector-wrapper select",e).wrap('<span class="select" data-dropdown-form-style></span>'),this.findSelectedVariantImage()),0<$(".masonry--true").length&&Shopify.theme.applyMasonry(".thumbnail")},enableStickyScroll:function(e,t){var i=0,a=0;void 0!==Shopify.theme.jsAnnouncementBar&&Shopify.theme.jsAnnouncementBar.enable_sticky&&(i=$("#announcement-bar").outerHeight()),"vertical"!=Shopify.theme_settings.header_layout&&Shopify.theme.jsHeader.enable_sticky&&(a=$("#header").outerHeight()),1<t.data("media-count")&&e.stick_in_parent({offset_top:i+a+20})},enableLightbox:function(e){e.find(".product-gallery__link").fancybox({beforeClose:function(e,t){var i=e.$trigger.first().parents(".product-gallery__main");i.hide(),setTimeout(function(){i.fadeIn(100)},500)},afterClose:function(){setTimeout(function(){e.find(".is-selected a").focus()},500)}})},enableZoom:function(){var e=$(event.target),t=e.data("zoom-src");t&&e.wrap('<span class="zoom-container"></span>').css("display","block").parent().zoom({url:t,touch:!1,magnify:1})},disableSlideshow:function(e,t){t=e?e.find(".flickity-enabled"):$(t);t.flickity("destroy")},enableSlideshow:function(e,t){var r=e,i=r.closest(".product-gallery").find(".product-gallery__thumbnails");r.find(".gallery-cell:not(.product-gallery__image)").addClass("product-gallery__image"),i.find(".gallery-cell:not(.product-gallery__thumbnail)").addClass("product-gallery__thumbnail");var a,o,n,d,l,s=r.find(".product-gallery__image"),c=i.find(".product-gallery__thumbnail"),t=t?(a=t.thumbnailsEnabled,o=t.thumbnailsSliderEnabled,n=t.thumbnailsPosition,d=t.arrowsEnabled,l=t.slideshowSpeed,t.slideshowTransition):(a=Shopify.theme.jsProduct.thumbnails_enabled,o=Shopify.theme.jsProduct.enable_thumbnail_slider,n=Shopify.theme.jsProduct.thumbnail_position,d=Shopify.theme.jsProduct.thumbnail_arrows,l=Shopify.theme.jsProduct.slideshow_speed,Shopify.theme.jsProduct.slideshow_transition);r.on("ready.flickity",function(){s.each(function(e,t){var i,a=$(t).data("media-type")||$(t).find("[data-media-type]").data("media-type"),o=$("[data-video-loop]").data("video-loop");switch(a){case"external_video":if(i=$(t).find("[data-plyr-video-id]").data("plyr-video-id"),videoPlayers)for(var n=0;n<videoPlayers.length;n++)videoPlayers[n].id!=i&&videoPlayers[n].media.id!=i||(videoPlayers[n].loop=o,$(t).hasClass("is-selected")||(videoPlayers[n].keyboard={focused:!1,global:!1}));break;case"video":if(i=$(t).find("[data-plyr-video-id]").data("plyr-video-id"),videoPlayers)for(var d=0;d<videoPlayers.length;d++)videoPlayers[d].id!=i&&videoPlayers[d].media.id!=i||(videoPlayers[d].loop=o,$(t).hasClass("is-selected")||(videoPlayers[d].keyboard={focused:!0,global:!1}));break;case"model":$(t).hasClass("is-selected")&&"model"==a&&isScreenSizeLarge()&&($(t).on("mouseenter",function(){r.flickity("unbindDrag")}),$(t).on("mouseleave",function(){r.flickity("bindDrag")}))}$(t).keypress(function(e){13==e.which&&($(t).find("model-viewer, .product-gallery__link, .plyr").focus(),"video"!=a&&"external_video"!=a||h(),"model"==a&&autoplayModel())})})}),r.flickity({wrapAround:!0,adaptiveHeight:!0,dragThreshold:10,imagesLoaded:!0,pageDots:!1,prevNextButtons:1<r.data("media-count")||1<s.length,autoPlay:1e3*l,fade:"fade"===t,watchCSS:"image-scroll"===this.template&&!r.hasClass("js-gallery-modal"),arrowShape:arrowShape}),r.on("change.flickity",function(){s.each(function(e,t){var i=$(t).data("media-type")||$(t).find("[data-media-type]").data("media-type");if($(t).hasClass("is-selected"))"model"===i?(isScreenSizeLarge()&&($(t).on("mouseenter",function(){r.flickity("unbindDrag")}),$(t).on("mouseleave",function(){r.flickity("bindDrag")})),$(t).find("model-viewer").on("shopify_model_viewer_ui_toggle_play",function(){r.flickity("unbindDrag")}),$(t).find("model-viewer").on("shopify_model_viewer_ui_toggle_pause",function(){r.flickity("bindDrag")})):r.flickity("bindDrag");else switch(i){case"external_video":$.each(videoPlayers,function(e,t){t.pause()});break;case"video":$.each(videoPlayers,function(e,t){t.pause()});break;case"model":$.each(Shopify.theme.productMedia.models,function(e,t){t.pause()})}}),Shopify.theme.productMedia.showModelIcon(r)});var u,p,f,t=r.find(".flickity-prev-next-button");function h(){s.each(function(e,t){var i,a,o,n,d=$(t),r=d.data("media-type")||d.find("[data-media-type]").data("media-type"),l=d.find("video").data("plyr-video-id"),t=d.find("iframe").attr("id");d.hasClass("is-selected")&&("video"==r?(l=d.find("video").data("plyr-video-id"))&&(o=l,n=d,$.each(videoPlayers,function(e,t){t.id==o&&(t.play(),t.on("exitfullscreen",function(){n.closest(".product-gallery").find(".product-gallery__thumbnails").focus()}))})):"external_video"==r&&t&&(i=t,a=d,$.each(videoPlayers,function(e,t){t.playing&&t.pause(),t.media.id==i&&(t.play(),t.on("exitfullscreen",function(){a.closest(".product-gallery").find(".product-gallery__thumbnails").focus()}))})))})}(t||c)&&isScreenSizeLarge()&&(t.on("click",function(){return r.on("settle.flickity",function(e,t){var i,a=r.find(".product-gallery__image.is-selected"),a=a.data("media-type")||a.find("[data-media-type]").data("media-type"),o=r.data("product-id");"video"!=a&&"external_video"!=a||h(),"model"==a&&(i=[],$.each(Shopify.theme.productMedia.models,function(e,t){$(t.container).closest(".product-gallery__image").data("product-id")==o&&i.push(t)}),$.each(i,function(e,t){$(t.container).parents(".product-gallery__image").hasClass("is-selected")&&t.play()})),r.off("settle.flickity")}),!1}),c.on("click",function(e){e=$(e.currentTarget).index();return r.flickity("select",e),r.on("settle.flickity",function(e,t){var i,a=r.find(".product-gallery__image.is-selected"),a=a.data("media-type")||a.find("[data-media-type]").data("media-type"),o=r.data("product-id");"video"!=a&&"external_video"!=a||h(),"model"==a&&(i=[],$.each(Shopify.theme.productMedia.models,function(e,t){$(t.container).closest(".product-gallery__image").data("product-id")==o&&i.push(t)}),$.each(i,function(e,t){$(t.container).parents(".product-gallery__image").hasClass("is-selected")&&t.play()})),r.off("settle.flickity")}),!1}),c.keypress(function(e){var t=$(e.currentTarget).index();if(13==e.which){r.flickity("select",t);var i=r.find(".product-gallery__image.is-selected"),a=r.data("product-id");r.on("settle.flickity",function(e,t){i.find("model-viewer, .plyr, a").focus(),i.find("[data-youtube-video]").attr("tabindex","0"),r.off("settle.flickity")});var o,t=i.data("media-type")||$selected.find("[data-media-type]").data("media-type");return"video"!=t&&"external_video"!=t||h(),"model"==t&&(o=[],$.each(Shopify.theme.productMedia.models,function(e,t){$(t.container).closest(".product-gallery__image").data("product-id")==a&&o.push(t)}),$.each(o,function(e,t){$(t.container).parents(".product-gallery__image").hasClass("is-selected")&&t.play()})),!1}})),r.on("settle.flickity",function(){r.flickity("resize")}),$(window).on("load",function(){r.flickity("resize")}),$(window).on("resize",function(e){clearTimeout(u),u=setTimeout(function(){r.flickity("resize")},250)}),1==a&&1==o&&1<s.length&&(isScreenSizeLarge()?"right-thumbnails"==n||"left-thumbnails"==n?(i.addClass("vertical-slider-enabled"),p=c.height(),f=i.height(),setTimeout(function(){var e=r.height();i.css("max-height",e),r.on("change.flickity",function(){var e=r.height();i.css("max-height",e)})},500),r.on("select.flickity",function(){var e=r.data("flickity");e&&(i.find(".is-nav-selected").removeClass("is-nav-selected"),e=c.eq(e.selectedIndex).addClass("is-nav-selected").position().top+i.scrollTop()-(f+p)/2,i.animate({scrollTop:e}))})):(i.flickity({cellAlign:"center",contain:!0,groupCells:"80%",imagesLoaded:!0,pageDots:!1,prevNextButtons:5<c.length&&d,asNavFor:"image-scroll"===this.template&&isScreenSizeLarge()?"":r[0],arrowShape:arrowShape}),i.on("settle.flickity",function(){i.flickity("resize")}),$(window).on("load",function(){i.flickity("resize")})):i.flickity({cellAlign:"center",contain:!0,groupCells:"80%",imagesLoaded:!0,pageDots:!1,prevNextButtons:5<c.length&&d,asNavFor:"image-scroll"===this.template&&isScreenSizeLarge()?"":r[0],arrowShape:arrowShape}))},enableProductSwatches:function(){var e;$("body").on("change",".swatch :radio",function(){var e,t=$(this).closest(".swatch").attr("data-option-index"),i=$(this).val(),a=$(this).closest(".product_form form");e=a.siblings(".notify_form").length?a.siblings(".notify_form"):$(".js-notify-form");var o=a.find(".swatch_options input:checked").eq(0).val(),n=a.find(".swatch_options input:checked").eq(1).val()||"",a=a.find(".swatch_options input:checked").eq(2).val()||"";o=o&&n&&a?o+" / "+n+" / "+a:o&&n?o+" / "+n:o,e.find(".notify_form_message").attr("value",e.find(".notify_form_message").data("body")+" - "+o),$(this).closest("form").find(".single-option-selector").eq(t).val(i).trigger("change")}),$(".js-product_section").length&&((e=$(".js-product_section").find(".product_form")).addClass("is-visible"),e.each(function(){var e=$(this).data("product"),t=".product-"+$(this).data("product-id")+" .js-product_section";1<$(this).find(".swatch_options .swatch").length&&Shopify.linkOptionSelectors(e,t)})),1<$(".js-product_section").length&&$("body").on("click",".swatch-element",function(){var e=$(this).data("value").toString();$(this).siblings('input[value="'+e.replace(/\"/g,'\\"')+'"]').prop("checked",!0).trigger("change");var t=$(this).parents(".product_form").data("product"),e=".product-"+$(this).parents(".product_form").data("product-id")+" .js-product_section";1<$(this).parents(".product_form").find(".swatch_options .swatch").length&&Shopify.linkOptionSelectors(t,e)}),this.findSelectedVariantImage()},findSelectedVariantImage:function(){$("[data-variant-selector]").on("selectedVariantChanged",function(){$(this).attr("disabled")||function(e,t){t=e.parents(".product_form").find("select option[value=".concat(t,"]")).attr("data-image-id");if(!t)return;t=$("[data-image-id=".concat(t,"]")).data("index");"image-scroll"===Shopify.theme.jsProduct.template&&Shopify.theme.jsProduct.scrollSelectedImage(t)}($(this),$(this).val())})},scrollSelectedImage:function(e){var t=0,i=0,i=(t=1==Shopify.theme.jsHeader.enable_sticky&&"vertical"!=Shopify.theme_settings.header_layout?Shopify.theme.jsHeader.getHeaderHeight():t)+(i=void 0!==Shopify.theme.jsAnnouncementBar&&1==Shopify.theme.jsAnnouncementBar.enable_sticky&&"vertical"!=Shopify.theme_settings.header_layout?Shopify.theme.jsAnnouncementBar.getAnnouncementHeight():i);Shopify.theme.scrollToTop($('[data-index="'.concat(e,'"]')),i)},relatedProducts:function(){$(".block__recommended-products .js-related-products-slider .products-slider").each(function(e,t){var i=$(this),a={products_per_slide:i.data("products-per-slide"),products_available:i.data("products-available"),products_limit:i.data("products-limit"),initialIndex:0,cellAlign:"left",wrapAround:!0};a.products_available>a.products_per_slide&&a.products_limit>a.products_per_slide?a.wrapAround=!0:a.wrapAround=!1,a.products_available<a.products_per_slide||a.products_limit<a.products_per_slide?(i.addClass("container is-justify-center"),i.find(".gallery-cell").addClass("column")):(i.flickity({lazyLoad:2,freeScroll:!0,imagesLoaded:!0,draggable:">1",cellAlign:"center",wrapAround:a.wrapAround,pageDots:!1,contain:!0,prevNextButtons:a.products_limit>a.products_per_slide,initialIndex:a.initialIndex,arrowShape:arrowShape}),i.on("settle.flickity",function(){i.flickity("resize")}),$(window).on("load",function(){i.flickity("resize")}))})},activateIconsSlider:function(){var e=$(".icon-with-text-column__slider");e&&e.flickity({prevNextButtons:!1,watchCSS:!0})},unload:function(e){$(".selector-wrapper select",e).unwrap(),this.disableSlideshow(e),$("[data-variant-selector]").off(),document.removeEventListener("lazybeforeunveil",Shopify.theme.jsProduct.enableZoom)}};