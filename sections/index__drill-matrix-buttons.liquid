{% assign id = section.id %}
{% assign section_title = section.settings.section_title %}
{% assign blocks = section.blocks %}
{% assign bg_color = section.settings.bg_color %}
{% assign padding_top = section.settings.padding_top %}
{% assign padding_bottom = section.settings.padding_bottom %}
{% assign title_spacing_top = section.settings.title_spacing_top %}
{% assign title_spacing_bottom = section.settings.title_spacing_bottom %}
{% assign buttons_min_width = section.settings.buttons_min_width %}
{% assign buttons_height = section.settings.buttons_height %}
{% assign buttons_per_row = section.settings.buttons_per_row %}
{% assign buttons_per_row_mobile = section.settings.buttons_per_row_mobile %}
{% assign column_gap = section.settings.column_gap %}
{% assign row_gap = section.settings.row_gap %}
{% assign column_gap_mobile = section.settings.column_gap_mobile %}
{% assign row_gap_mobile = section.settings.row_gap_mobile %}
{% assign button_fs = section.settings.button_fs %}
{% assign buttons_min_width_mobile = section.settings.buttons_min_width_mobile %}
{% assign buttons_height_mobile = section.settings.buttons_height_mobile %}
{% assign button_fs_mobile = section.settings.button_fs_mobile %}
{% assign button_icon_size = section.settings.button_icon_size %}
{% assign button_icon_size_mobile = section.settings.button_icon_size_mobile %}

{% style %}
  #shopify-section-{{ id }} {
    background: {{ bg_color }};
  }
  #shopify-section-{{ id }} .section {
    padding-top: {{ padding_top }}px;
    padding-bottom: {{ padding_bottom }}px;
  }
  #shopify-section-{{ id }} .section_title {
    padding-top: {{ title_spacing_top }}px;
    padding-bottom: {{ title_spacing_bottom }}px;
  }
  #shopify-section-{{ id }} .buttons_holder {
    max-width: {{ buttons_per_row | times: buttons_min_width }}px;
  }
  #shopify-section-{{ id }} .button-container {
    flex: 0 0 auto;
    min-width: {{ buttons_min_width }}px;
    padding-left: {{ column_gap | divided_by: 2.00 }}px;
    padding-right: {{ column_gap | divided_by: 2.00 }}px;
    padding-bottom: {{ row_gap | divided_by: 2.00 }}px;
    padding-top: {{ row_gap | divided_by: 2.00 }}px;
  }

  #shopify-section-{{ id }} .button {
    height: {{ buttons_height }}px;
    font-size: {{ button_fs }}px !important;
  }
  #shopify-section-{{ id }} .button .icon{
    height: {{ button_icon_size }}px;
    width: {{ button_icon_size }}px;
  }

  @media only screen and (max-width: 480px) {
    #shopify-section-{{ id }} .buttons_holder {
      max-width: {{ buttons_per_row_mobile | times: buttons_min_width_mobile }}px;
    }
    #shopify-section-{{ id }} .button-container {
      flex: 0 0 auto;
      min-width: {{ buttons_min_width_mobile }}px;
      padding-left: {{ column_gap_mobile | divided_by: 2.00 }}px;
      padding-right: {{ column_gap_mobile | divided_by: 2.00 }}px;
      padding-bottom: {{ row_gap_mobile | divided_by: 2.00 }}px;
      padding-top: {{ row_gap_mobile | divided_by: 2.00 }}px;
    }
  
    #shopify-section-{{ id }} .button {
      height: {{ buttons_height_mobile }}px;
      font-size: {{ button_fs_mobile }}px !important;
    }
    #shopify-section-{{ id }} .button .icon{
      height: {{ button_icon_size_mobile }}px;
      width: {{ button_icon_size_mobile }}px;
    }
  }

{% endstyle %}

<div class="section is-width-standard" data-section-type="index__drill-matrix-buttons">
  <div class="container has-no-side-gutter is-justify-center">
    {% if section_title != blank %}
      <h2 class="section_title text-align-center fw-bold one-whole">{{ section_title }}</h2>
    {% endif %}

    {% if blocks.size >= 2 %}
      <div class="buttons_holder one-whole is-flex is-flex-wrap is-justify-center">

        {% for block in blocks %}
          <div class="button-container">
            {% render 'button',
              label: block.settings.label,
              href: block.settings.link,
              type: "link",
              icon: block.settings.icon,
              style: "button--primary"
            %}
          </div>
        {% endfor %}

      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Drill Matrix Buttons",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Insert title here"
    },
    {
      "type": "header",
      "content": "Section colors"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Section background",
      "default": "rgba(0, 0, 0, 0)"
    },
    {
      "type": "header",
      "content": "Section Title Spacing"
    },
    {
      "type": "number",
      "id": "title_spacing_top",
      "label": "Spacing top",
      "default": 20
    },
    {
      "type": "number",
      "id": "title_spacing_bottom",
      "label": "Spacing bottom",
      "default": 20
    },
    {
      "type": "header",
      "content": "Buttons"
    },
    {
      "type": "number",
      "id": "buttons_per_row",
      "label": "Buttons per row",
      "default": 3
    },
    {
      "type": "number",
      "id": "buttons_per_row_mobile",
      "label": "Buttons per row (mobile)",
      "default": 2
    },
    {
      "type": "number",
      "id": "column_gap",
      "label": "Column gap",
      "default": 20
    },
    {
      "type": "number",
      "id": "row_gap",
      "label": "Row gap",
      "default": 20
    },
    {
      "type": "number",
      "id": "column_gap_mobile",
      "label": "Column gap (mobile)",
      "default": 20
    },
    {
      "type": "number",
      "id": "row_gap_mobile",
      "label": "Row gap (mobile)",
      "default": 20
    },
    {
      "type": "number",
      "id": "buttons_min_width",
      "label": "Min width",
      "default": 330
    },
    {
      "type": "number",
      "id": "buttons_min_width_mobile",
      "label": "Min width (mobile)",
      "default": 150
    },
    {
      "type": "number",
      "id": "buttons_height",
      "label": "Height",
      "default": 60
    },
    {
      "type": "number",
      "id": "buttons_height_mobile",
      "label": "Height (mobile)",
      "default": 40
    },
    {
      "type": "number",
      "id": "button_fs",
      "label": "Font Size",
      "default": 20
    },
    {
      "type": "number",
      "id": "button_fs_mobile",
      "label": "Font Size (mobile)",
      "default": 13
    },
    {
      "type": "number",
      "id": "button_icon_size",
      "label": "Icon Size",
      "default": 30
    },
    {
      "type": "number",
      "id": "button_icon_size_mobile",
      "label": "Icon Size (mobile)",
      "default": 20
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "number",
      "id": "padding_top",
      "label": "Section Top spacing",
      "default": 20
    },
    {
      "type": "number",
      "id": "padding_bottom",
      "label": "Section Bottom spacing",
      "default": 20
    }
  ],
  "blocks": [
    {
      "name": "Button",
      "type": "link",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Button"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "icon",
          "label": "Icon",
          "default": "pleasure"
        }
      ]
    }
  ],
  "presets": [
    {
      "category": "Nav",
      "name":"Drill Matrix"
    }
  ]
}
{% endschema %}